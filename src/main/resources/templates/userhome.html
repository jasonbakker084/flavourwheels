<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
	  layout:decorator="layout" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  xsi:schemaLocation="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5 ">
<head>
	<link rel="stylesheet" th:href="@{https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css}"
		  integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<title layout:title-pattern="$DECORATOR_TITLE - $CONTENT_TITLE">Coffee Flavour Wheel App</title>
</head>
<body>
<div th:fragment="navbar">
	<div class="container-fluid">
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
			<a class="navbar-brand mb-0 h1 nav-link" href="/"><img th:src="@{./images/transp_android-chrome-192x192.png}" width="30" height="30" class="d-inline-block align-top" alt="">Coffee Flavour Wheel
			</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02"
					aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarTogglerDemo02">
				<ul class="navbar-nav mr-auto mt-2 mt-lg-0">
					<li class="nav-item active">
					</li>
					<li class="nav-item">
						<a class="nav-link" href="library.html" th:href="@{library.html}">Coffee library</a>
					</li>
					<li class="nav-item" sec:authorize="hasRole('ROLE_ADMIN')">
						<a class="nav-link" href="home.html" th:href="@{/admin/home}">Admin Home</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" sec:authorize="isAuthenticated()" th:href="@{/logout}">Logout</a>
					</li>
				</ul>
				<form class="nav-item">
					<a class="nav-link">Welcome <span sec:authentication="principal.username">User</span></a>
				</form>
			</div>
		</nav>
	</div>

</div>
<div layout:fragment="content">

	<p>
		Welcome <span sec:authentication="principal.username">User</span>
	</p>
	<p>
		<a th:href="@{/logout}">Logout</a>
	</p>
	<div sec:authorize="hasRole('ROLE_ADMIN')">
		<h3>You will see this only if you are ADMIN</h3>
		<p>
			<a th:href="@{/admin/home}">Admin Home</a>
		</p>
	</div>
	<h3>Form with CSRF Token</h3>
	<form th:action="@{/messages}" method="post">
		<label>
			<textarea name="content" cols="50" rows="5"></textarea>
		</label>
		<br>
		<input type="submit" value="Submit"/>
	</form>

	<div>
		<br>
		<div class="panel panel-default">
			<div class="panel-heading">
				Messages
			</div>

			<p th:each="msg: ${msgs}" th:text="${msg.content}"></p>
		</div>

	</div>
</div>
<script th:src="@{https://code.jquery.com/jquery-3.4.1.slim.min.js}" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script th:src="@{https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js}" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script th:src="@{https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js}" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>

</html>